version: '3.8'

services:
  # Main development environment
  dev-env:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: universal-dev-env
    hostname: dev-env
    volumes:
      # Mount workspace
      - ./workspace:/home/dev/workspace
      # Mount development projects
      - ~/code:/home/dev/code
      # Mount git config
      - ~/.gitconfig:/home/dev/.gitconfig:ro
      # Mount SSH keys (read-only)
      - ~/.ssh:/home/dev/.ssh:ro
    ports:
      # Development servers
      - "3000:3000"   # Next.js
      - "3001:3001"   # React
      - "4000:4000"   # Vue
      - "5000:5000"   # Python Flask
      - "8000:8000"   # Jupyter
      - "8080:8080"   # Angular
      - "9000:9000"   # SFCC
    environment:
      - NODE_ENV=development
      - PYTHONPATH=/home/dev/workspace
    stdin_open: true
    tty: true
    networks:
      - dev-network

  # SFCC development environment
  sfcc-dev:
    build:
      context: .
      dockerfile: Dockerfile.sfcc
    container_name: sfcc-dev-env
    hostname: sfcc-dev
    volumes:
      - ./workspace/sfcc:/home/dev/workspace
      - ~/code/sfcc-projects:/home/dev/code
    ports:
      - "9000:9000"
    environment:
      - NODE_ENV=development
      - NODE_VERSION=14
    stdin_open: true
    tty: true
    networks:
      - dev-network

  # AI/ML development environment
  ai-dev:
    build:
      context: .
      dockerfile: Dockerfile.ai
    container_name: ai-dev-env
    hostname: ai-dev
    volumes:
      - ./workspace/ai:/home/dev/workspace
      - ~/code/ai-projects:/home/dev/code
    ports:
      - "8000:8000"   # Jupyter
      - "5000:5000"   # Flask API
    environment:
      - PYTHONPATH=/home/dev/workspace
      - JUPYTER_ENABLE_LAB=yes
    stdin_open: true
    tty: true
    networks:
      - dev-network

  # Data visualization environment
  data-viz:
    build:
      context: .
      dockerfile: Dockerfile.data
    container_name: data-viz-env
    hostname: data-viz
    volumes:
      - ./workspace/data:/home/dev/workspace
      - ~/code/data-projects:/home/dev/code
    ports:
      - "8000:8000"   # Jupyter
      - "5000:5000"   # Streamlit
    environment:
      - PYTHONPATH=/home/dev/workspace
    stdin_open: true
    tty: true
    networks:
      - dev-network

networks:
  dev-network:
    driver: bridge
